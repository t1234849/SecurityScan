# 🚀 快速入门指南

欢迎使用代码安全扫描助手！这个指南将帮助你在 5 分钟内开始使用插件。

---

## 📥 第一步：构建插件

### Windows 系统

**方式 1：使用脚本（推荐）**
```cmd
双击运行：build-and-run.bat
选择 [2] 运行插件
```

**方式 2：手动构建**
```cmd
gradlew.bat buildPlugin
```

### Linux/Mac 系统

**方式 1：使用脚本（推荐）**
```bash
chmod +x build-and-run.sh
./build-and-run.sh
选择 [2] 运行插件
```

**方式 2：手动构建**
```bash
./gradlew buildPlugin
```

---

## 🎮 第二步：运行和测试

### 启动插件

运行以下命令，会自动打开一个新的 IDEA 窗口，插件已经安装好了：

```bash
# Windows
gradlew.bat runIde

# Linux/Mac
./gradlew runIde
```

### 测试插件效果

1️⃣ **在新打开的 IDEA 窗口中，创建或打开一个 Java 项目**

2️⃣ **创建测试文件 `SecurityTest.java`**

```java
import com.alibaba.fastjson.JSON;
import java.sql.*;

public class SecurityTest {
    
    // 测试 1：Fastjson 反序列化（会显示红色波浪线）
    public void testFastjson(String json) {
        Object obj = JSON.parseObject(json);  // 🔥 这里会标红
    }
    
    // 测试 2：SQL 注入（会显示红色波浪线）
    public void testSql(Connection conn, String name) throws Exception {
        String sql = "SELECT * FROM users WHERE name = '" + name + "'";  // 🔥 这里会标红
        Statement stmt = conn.createStatement();
        stmt.executeQuery(sql);
    }
    
    // 测试 3：路径遍历（会显示黄色波浪线）
    public void testPath(String fileName) {
        File file = new File("/uploads/" + fileName);  // ⚠️ 这里会标黄
    }
}
```

3️⃣ **观察效果**

打开上面的测试文件后，你会看到：
- 🔴 **红色波浪线**：高危安全问题
- 🟡 **黄色波浪线**：警告级别问题

4️⃣ **查看详细提示**

将鼠标悬停在波浪线上，会显示：
- 风险说明
- 攻击示例
- 修复建议

5️⃣ **一键修复**

1. 把光标放在有问题的代码上
2. 按 `Alt+Enter`（Mac: `Option+Enter`）
3. 选择修复方案
4. 代码自动修改！

---

## 🎯 第三步：使用完整的测试示例

项目中已经准备好了完整的测试文件：

```
src/main/resources/examples/SecurityTestExamples.java
```

**复制到你的项目中：**

```bash
# 复制测试文件到你的项目
cp src/main/resources/examples/SecurityTestExamples.java <你的项目路径>/src/main/java/
```

打开这个文件，你会看到：
- ✅ 6 种常见安全漏洞的示例
- ✅ 对应的安全修复方案
- ✅ 详细的注释说明
- ✅ 攻击场景演示

---

## 📊 支持检测的安全问题

| 问题类型 | 风险级别 | 示例代码 |
|---------|---------|---------|
| **Fastjson 反序列化** | 🔥 高危 | `JSON.parseObject(userInput)` |
| **SQL 注入** | 🔥 高危 | `"SELECT * FROM users WHERE id=" + id` |
| **Java 反序列化** | 🔥 高危 | `ObjectInputStream.readObject()` |
| **命令注入** | 🔥 高危 | `Runtime.exec("cat " + fileName)` |
| **路径遍历** | ⚠️ 警告 | `new File(userInput)` |
| **SSRF** | ⚠️ 警告 | `new URL(userInput)` |

---

## 💡 常见操作

### 查看所有安全问题

1. View → Tool Windows → Problems
2. 筛选 "Security" 分组
3. 查看所有检测到的问题

### 批量修复

1. 在 Problems 窗口中
2. 右键点击问题
3. 选择"Apply Fix"
4. 或使用 `Alt+Shift+Enter` 批量修复

### 禁用某个规则

1. File → Settings → Editor → Inspections
2. 展开 Security 分组
3. 取消勾选不需要的规则

### 调整严重级别

1. File → Settings → Editor → Inspections
2. 选择规则
3. 在右侧修改严重级别

---

## 🔧 安装到正式 IDEA

### 方式 1：从构建文件安装

```bash
# 1. 构建插件
./gradlew buildPlugin

# 2. 在 IDEA 中
# Settings → Plugins → ⚙️ → Install Plugin from Disk...
# 选择：build/distributions/SecurityScan-1.0-SNAPSHOT.zip

# 3. 重启 IDEA
```

### 方式 2：直接使用开发模式

```bash
# 每次都运行这个命令
./gradlew runIde
```

---

## 📚 更多资源

### 详细文档

- **README.md** - 项目概述和功能介绍
- **PLUGIN_USAGE.md** - 详细的使用说明
- **DEVELOPMENT.md** - 开发者指南（如何添加新规则）
- **PROJECT_SUMMARY.md** - 项目总结

### 测试文件

- **SecurityTestExamples.java** - 完整的测试用例

### 配置示例

- **security-rules-config.yaml** - 规则配置示例

---

## ❓ 常见问题

### Q1: 插件没有显示警告？

**检查：**
1. 确保插件已启用：Settings → Plugins → 搜索 "SecurityScan"
2. 确保规则已启用：Settings → Editor → Inspections → Security
3. 尝试重新打开文件

### Q2: QuickFix 不起作用？

**原因：**
- 代码结构复杂，自动修复可能失败
- 会添加 TODO 注释提示手动修复

### Q3: 误报怎么办？

**解决：**
1. 如果是常量，插件会自动识别为安全
2. 如果确认安全，可以在该规则上添加 `@SuppressWarnings("SecurityRuleName")`
3. 或者在 Settings 中禁用该规则

### Q4: 如何添加自己的规则？

**步骤：**
1. 阅读 `DEVELOPMENT.md`
2. 参考现有规则实现
3. 创建规则类、Inspection 类
4. 注册到 plugin.xml

---

## 🎯 下一步

### 团队使用

1. **分享插件包**
   ```bash
   ./gradlew buildPlugin
   # 分发：build/distributions/SecurityScan-1.0-SNAPSHOT.zip
   ```

2. **团队规范**
   - 提交代码前必须通过安全检查
   - 定期审查安全问题
   - 持续更新规则

### 持续改进

1. **收集反馈**
   - 记录误报情况
   - 收集新的安全风险

2. **扩展规则**
   - 参考 `DEVELOPMENT.md` 添加新规则
   - 分享给社区

---

## 🎉 成功！

恭喜你完成了快速入门！现在你已经可以：

- ✅ 实时检测代码中的安全问题
- ✅ 查看详细的安全提示
- ✅ 一键自动修复
- ✅ 自定义规则配置

**开始享受更安全的编码体验吧！🚀**

---

## 📞 需要帮助？

- 📖 查看详细文档：README.md
- 💻 开发者指南：DEVELOPMENT.md
- 🐛 提交问题：GitHub Issues
- 💬 讨论交流：GitHub Discussions

---

<div align="center">

**让安全编码成为习惯 🛡️**

Made with ❤️ by SecurityScan Team

</div>

